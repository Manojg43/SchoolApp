{% extends "certificates/base_certificate.html" %}

{% block certificate_title %}
FEE CLEARANCE CERTIFICATE
{% endblock %}

{% block content %}
<p style="margin-top: 30px;">
    This is to certify that <span class="highlight">{{ student_name }}</span>,
    son/daughter of <span class="highlight">{{ father_name }}</span>,
    bearing Enrollment No. <span class="highlight">{{ enrollment_number }}</span>,
    studying in <span class="highlight">{{ class_name }} - Section {{ section }}</span>,
    has cleared all the fee dues for the academic year <span class="highlight">{{ academic_year }}</span>.
</p>

<table style="width: 100%; margin: 30px 0; border-collapse: collapse;">
    <tr style="background-color: #333; color: white;">
        <th style="padding: 10px; border: 1px solid #ddd; text-align: left;">Fee Category</th>
        <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Amount (₹)</th>
        <th style="padding: 10px; border: 1px solid #ddd; text-align: right;">Paid (₹)</th>
        <th style="padding: 10px; border: 1px solid #ddd; text-align: center;">Status</th>
    </tr>
    {% for fee in fee_details %}
    <tr {% if forloop.counter|divisibleby:2 %}style="background-color: #f5f5f5;" {% endif %}>
        <td style="padding: 8px; border: 1px solid #ddd;">{{ fee.category }}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">{{ fee.amount|floatformat:2 }}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: right;">{{ fee.paid|floatformat:2 }}</td>
        <td style="padding: 8px; border: 1px solid #ddd; text-align: center;">
            <span style="color: green; font-weight: bold;">✓ PAID</span>
        </td>
    </tr>
    {% endfor %}
    <tr style="background-color: #333; color: white; font-weight: bold;">
        <td style="padding: 10px; border: 1px solid #ddd;">TOTAL</td>
        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{ total_amount|floatformat:2 }}</td>
        <td style="padding: 10px; border: 1px solid #ddd; text-align: right;">{{ total_paid|floatformat:2 }}</td>
        <td style="padding: 10px; border: 1px solid #ddd; text-align: center;">₹ 0.00</td>
    </tr>
</table>

<p style="margin-top: 25px;">
    <strong>Payment Summary:</strong>
</p>

<table style="width: 60%; margin: 15px 0;">
    <tr>
        <td style="padding: 5px;"><strong>Total Fees:</strong></td>
        <td style="padding: 5px; text-align: right;">₹ {{ total_amount|floatformat:2 }}</td>
    </tr>
    <tr>
        <td style="padding: 5px;"><strong>Total Paid:</strong></td>
        <td style="padding: 5px; text-align: right;">₹ {{ total_paid|floatformat:2 }}</td>
    </tr>
    <tr style="border-top: 2px solid #000;">
        <td style="padding: 5px;"><strong>Balance Due:</strong></td>
        <td style="padding: 5px; text-align: right; font-weight: bold; color: green;">₹ 0.00</td>
    </tr>
</table>

<p style="margin-top: 30px; padding: 15px; background-color: #e8f5e9; border-left: 4px solid #4caf50;">
    <strong>✓ NO DUES PENDING</strong><br>
    All fee payments for the academic year {{ academic_year }} have been received and cleared.
</p>

<p style="margin-top: 25px; font-size: 10pt; color: #666;">
    This certificate is valid for the academic year {{ academic_year }} only. For current status,
    please contact the accounts department.
</p>
{% endblock %}